<mat-card class="book-card" [class.returning]="animando">

  <!-- PORTADA -->
  <img
    mat-card-image
    [src]="articulo.portadaUrl ?? 'assets/placeholder-book.jpg'"
    alt="Portada del libro"
  />

  <!-- Overlay SOLO si estÃ¡ alquilado -->
  @if (!articulo.disponible) {
    <div class="overlay">
      <span>ALQUILADO</span>
    </div>
  }

  <!-- CONTENIDO -->
  <mat-card-content>
    <h3 class="title">{{ articulo.titulo }}</h3>

    @if (articulo.autor) {
      <p class="author">{{ articulo.autor }}</p>
    }

    @if (articulo.fechaAlquiler) {
      <p class="date">
        ðŸ“… Alquilado: {{ articulo.fechaAlquiler | date:'dd/MM/yyyy' }}
      </p>
    }

    @if (articulo.fechaDevolucion) {
      <p class="date returned">
        âœ… Devuelto: {{ articulo.fechaDevolucion | date:'dd/MM/yyyy' }}
      </p>
    }

    @if (mode === 'readonly') {
      <p class="status returned">DEVUELTO</p>
    }
  </mat-card-content>


  <!-- ACCIONES -->
  <mat-card-actions align="end">

    <!-- ðŸŸ¢ ALQUILAR -->
    @if (mode === 'alquilar' && articulo.disponible) {
      <button
        mat-raised-button
        color="accent"
        [disabled]="animando"
        (click)="accion.emit()"
      >
        {{ animando ? 'Alquilandoâ€¦' : 'Alquilar' }}
      </button>
    }

    <!-- ðŸ”µ DEVOLVER -->
    @if (mode === 'devolver') {
      <button
        mat-raised-button
        color="primary"
        [disabled]="animando"
        (click)="accion.emit()"
      >
        {{ animando ? 'Devolviendoâ€¦' : 'Devolver' }}
      </button>
    }

  </mat-card-actions>
</mat-card>
